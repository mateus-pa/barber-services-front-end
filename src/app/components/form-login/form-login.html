@if (showLoginError()) {
<app-erro-modal-login [message]="errorMessageLogin()" (closed)="showLoginError.set(false)" />
}

<section class="login-container">
  <h2>Acesse sua conta</h2>

  <form [formGroup]="loginFormGroup" (ngSubmit)="onSubmit()">
    <div class="form-field">
      <label for="input-email">Email</label>
      <input
        id="input-email"
        type="email"
        class="text-input"
        placeholder="email@example.com"
        [formControl]="email"
        (blur)="updateErrorMessageEmail()"
        required
      />
      @if (email.invalid) {
      <div class="error-message">{{ errorMessageEmail() }}</div>
      }
    </div>

    <div class="form-field">
      <label for="input-password">Senha</label>

      <div class="input-with-icon">
        <input
          id="input-password"
          class="text-input"
          (blur)="updateErrorMessagePassword()"
          [type]="hide() ? 'password' : 'text'"
          [formControl]="password"
        />

        <button
          type="button"
          class="toggle-password"
          (click)="clickEvent($event)"
          [attr.aria-label]="hide() ? 'Mostrar senha' : 'Esconder senha'"
        >
          @if (hide()) {
          <i class="material-icons">visibility_off</i>
          } @else {
          <i class="material-icons">visibility</i>
          }
        </button>
      </div>
      @if (password.invalid) {
      <div class="error-message">{{ errorMessagePassword() }}</div>
      }
    </div>

    <label class="text-cadastro"
      >Ainda n√£o tem conta? <a routerLink="/cadastro">Cadastrar</a></label
    >

    <button type="submit" [disabled]="loginFormGroup.invalid" class="btn-login">
      @if (isLoading()) {
      <div class="spinner"></div>
      } @else { Entrar }
    </button>
  </form>
</section>
