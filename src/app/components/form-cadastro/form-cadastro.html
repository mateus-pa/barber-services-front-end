@if (showCreateAccountError()) {
<app-erro-modal-create-account
  [message]="errorMessageCreateAccount()"
  (closed)="showCreateAccountError.set(false)"
/>
}

<section class="cadastro-container">
  <h2>Cadastre sua conta</h2>

  <form [formGroup]="cadastroFormGroup" (ngSubmit)="onSubmit()">
    <div class="form-field">
      <label for="input-name">Nome</label>
      <input
        id="input-name"
        type="text"
        class="text-input"
        #input
        maxlength="50"
        placeholder="Ex. Maria Souza"
        [formControl]="nome"
        required
        (input)="onInput($event)"
      />

      @if (nome.invalid) {
      <div class="error-message">{{ errorMessageNome() }}</div>
      }
    </div>

    <div class="form-field">
      <label for="input-email">Email</label>
      <input
        id="input-email"
        type="email"
        class="text-input"
        placeholder="email@example.com"
        [formControl]="email"
        (blur)="updateErrorMessageEmail()"
        required
      />
      @if (email.invalid) {
      <div class="error-message">{{ errorMessageEmail() }}</div>
      }
    </div>

    <div class="form-field">
      <label for="input-password">Senha</label>
      <input
        id="input-password"
        class="text-input"
        (blur)="updateErrorMessagePassword()"
        type="password"
        [formControl]="password"
      />
      @if (password.invalid) {
      <div class="error-message">{{ errorMessagePassword() }}</div>
      }
    </div>

    <div class="lgpd">
      <input
        type="checkbox"
        id="aceiteTermos"
        name="aceiteTermos"
        [formControl]="aceiteTermos"
        required
        (change)="toggleButton()"
      />
      <label for="aceiteTermos">
        Li e aceito integralmente os
        <a
          href="https://www.planalto.gov.br/ccivil_03/_ato2015-2018/2018/lei/l13709.htm"
          target="_blank"
          >Termos de Serviço</a
        >
        e a
        <a
          href="https://www.planalto.gov.br/ccivil_03/_ato2015-2018/2018/lei/l13709.htm/"
          target="_blank"
          >Política de Privacidade</a
        >.
      </label>
      @if (aceiteTermos.invalid) {
      <div class="error-message">{{ errorMessageAceiteTermos() }}</div>
      }
    </div>

    <button type="submit" [disabled]="cadastroFormGroup.invalid" class="btn-cadastrar">
      @if (isLoading()) {
      <div class="spinner"></div>
      } @else { Cadastrar }
    </button>
  </form>
</section>
